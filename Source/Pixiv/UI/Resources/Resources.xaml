<ResourceDictionary
    x:Class="EHunter.Pixiv.Resources.Resources"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:tkUI="using:CommunityToolkit.WinUI.UI"
    xmlns:commonControls="using:EHunter.Controls"
    xmlns:converters="using:EHunter.Converters"
    xmlns:settings="using:EHunter.Pixiv.Settings"
    xmlns:vmi="using:EHunter.Pixiv.ViewModels.Illusts"
    xmlns:vmu="using:EHunter.Pixiv.ViewModels.User"
    xmlns:api="using:Meowtrix.PixivApi"
    xmlns:m="using:Meowtrix.PixivApi.Models">
    <converters:EnumLocalizeConverter x:Key="EnumLocalizeConverter" Scope="EHunter.Pixiv.UI/Resources" />

    <!-- TODO: workaround for https://github.com/microsoft/microsoft-ui-xaml/issues/6232 -->
    <m:AgeRestriction x:Key="__Dummy_AgeRestriction">0</m:AgeRestriction>
    <api:IllustSearchTarget x:Key="__Dummy_IllustSearchTarget">0</api:IllustSearchTarget>
    <api:IllustSortMode x:Key="__Dummy_IllustSortMode">0</api:IllustSortMode>
    <api:IllustRankingMode x:Key="__Dummy_IllustRankingMode">0</api:IllustRankingMode>
    <settings:PixivConnectionMode x:Key="__Dummy_PixivConnectionMode">0</settings:PixivConnectionMode>

    <DataTemplate x:Key="EnumLocalizeTemplate">
        <TextBlock Text="{Binding Converter={StaticResource EnumLocalizeConverter}}" />
    </DataTemplate>

    <Style TargetType="Selector"
           x:Key="AgeRestrictionSelectorStyle">
        <Setter Property="ItemTemplate" Value="{StaticResource EnumLocalizeTemplate}" />
        <Setter Property="ItemsSource" Value="{tkUI:EnumValues Type=m:AgeRestriction}" />
    </Style>

    <Style TargetType="Selector"
           x:Key="IllustSearchTargetSelectorStyle">
        <Setter Property="ItemTemplate" Value="{StaticResource EnumLocalizeTemplate}" />
        <Setter Property="ItemsSource" Value="{tkUI:EnumValues Type=api:IllustSearchTarget}" />
    </Style>

    <Style TargetType="Selector"
           x:Key="IllustSortModeSelectorStyle">
        <Setter Property="ItemTemplate" Value="{StaticResource EnumLocalizeTemplate}" />
        <Setter Property="ItemsSource" Value="{tkUI:EnumValues Type=api:IllustSortMode}" />
    </Style>

    <Style TargetType="Selector"
           x:Key="IllustRankingModeSelectorStyle">
        <Setter Property="ItemTemplate" Value="{StaticResource EnumLocalizeTemplate}" />
        <Setter Property="ItemsSource" Value="{tkUI:EnumValues Type=api:IllustRankingMode}" />
    </Style>

    <Style TargetType="Selector"
           x:Key="PixivConnectionModeSelectorStyle">
        <Setter Property="ItemTemplate" Value="{StaticResource EnumLocalizeTemplate}" />
        <Setter Property="ItemsSource" Value="{tkUI:EnumValues Type=settings:PixivConnectionMode}" />
    </Style>

    <DataTemplate x:Key="UserWithPreviewTemplate"
                  x:DataType="vmu:UserWithPreviewVM"
                  x:DefaultBindMode="OneTime">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <commonControls:RichImage
                Width="100"
                Height="100"
                Source="{x:Bind Avatar}" />
            <HyperlinkButton
                Grid.Column="1"
                MinWidth="300"
                Content="{x:Bind UserInfo.Name}"
                Command="{x:Bind NavigateToUserCommand}"
                CommandParameter="{x:Bind UserInfo}" />
            <ScrollViewer
                Grid.Column="2"
                HorizontalScrollMode="Auto"
                VerticalScrollMode="Disabled">
                <ItemsRepeater
                    ItemsSource="{x:Bind PreviewIllusts}">
                    <ItemsRepeater.Layout>
                        <StackLayout Spacing="4" Orientation="Horizontal" />
                    </ItemsRepeater.Layout>
                    <ItemsRepeater.ItemTemplate>
                        <DataTemplate x:DataType="vmi:IllustVM">
                            <commonControls:RichImage
                                Width="100"
                                Height="100"
                                Source="{x:Bind PreviewPage.Medium}" />
                        </DataTemplate>
                    </ItemsRepeater.ItemTemplate>
                </ItemsRepeater>
            </ScrollViewer>
        </Grid>
    </DataTemplate>

    <Style TargetType="ListViewItem" x:Key="ListViewItemGridStyle">
        <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
        <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
        <Setter Property="Background" Value="{ThemeResource GridViewItemBackground}" />
        <Setter Property="Foreground" Value="{ThemeResource GridViewItemForeground}" />
        <Setter Property="TabNavigation" Value="Local" />
        <Setter Property="IsHoldingEnabled" Value="True" />
        <Setter Property="HorizontalContentAlignment" Value="Center" />
        <Setter Property="VerticalContentAlignment" Value="Center" />
        <Setter Property="Margin" Value="0,0,4,4" />
        <Setter Property="MinWidth" Value="{ThemeResource GridViewItemMinWidth}" />
        <Setter Property="MinHeight" Value="{ThemeResource GridViewItemMinHeight}" />
        <Setter Property="AllowDrop" Value="False" />
        <Setter Property="UseSystemFocusVisuals" Value="{StaticResource UseSystemFocusVisuals}" />
        <Setter Property="FocusVisualMargin" Value="-2" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <ListViewItemPresenter ContentTransitions="{TemplateBinding ContentTransitions}" x:Name="Root" Control.IsTemplateFocusTarget="True" FocusVisualMargin="{TemplateBinding FocusVisualMargin}" SelectionCheckMarkVisualEnabled="{ThemeResource GridViewItemSelectionCheckMarkVisualEnabled}" CheckBrush="{ThemeResource GridViewItemCheckBrush}" CheckBoxBrush="{ThemeResource GridViewItemCheckBoxBrush}" DragBackground="{ThemeResource GridViewItemDragBackground}" DragForeground="{ThemeResource GridViewItemDragForeground}" FocusBorderBrush="{ThemeResource GridViewItemFocusBorderBrush}" FocusSecondaryBorderBrush="{ThemeResource GridViewItemFocusSecondaryBorderBrush}" PlaceholderBackground="{ThemeResource GridViewItemPlaceholderBackground}" PointerOverBackground="{ThemeResource GridViewItemBackgroundPointerOver}" PointerOverForeground="{ThemeResource GridViewItemForegroundPointerOver}" SelectedBackground="{ThemeResource GridViewItemBackgroundSelected}" SelectedForeground="{ThemeResource GridViewItemForegroundSelected}" SelectedPointerOverBackground="{ThemeResource GridViewItemBackgroundSelectedPointerOver}" PressedBackground="{ThemeResource GridViewItemBackgroundPressed}" SelectedPressedBackground="{ThemeResource GridViewItemBackgroundSelectedPressed}" DisabledOpacity="{ThemeResource ListViewItemDisabledThemeOpacity}" DragOpacity="{ThemeResource ListViewItemDragThemeOpacity}" ReorderHintOffset="{ThemeResource GridViewItemReorderHintThemeOffset}" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}" ContentMargin="{TemplateBinding Padding}" CheckMode="{ThemeResource GridViewItemCheckMode}" RevealBackground="{ThemeResource GridViewItemRevealBackground}" RevealBorderThickness="{ThemeResource GridViewItemRevealBorderThemeThickness}" RevealBorderBrush="{ThemeResource GridViewItemRevealBorderBrush}">
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />
                                <VisualState x:Name="Selected" />
                                <!-- Reveal removed in WinUI/WAS 1.0.0-preview3 -->
                                <!--<VisualState x:Name="PointerOver">
                                    <VisualState.Setters>
                                        <Setter Target="Root.(RevealBrush.State)" Value="PointerOver" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOverSelected">
                                    <VisualState.Setters>
                                        <Setter Target="Root.(RevealBrush.State)" Value="PointerOver" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PointerOverPressed">
                                    <VisualState.Setters>
                                        <Setter Target="Root.(RevealBrush.State)" Value="Pressed" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="Pressed">
                                    <VisualState.Setters>
                                        <Setter Target="Root.(RevealBrush.State)" Value="Pressed" />
                                    </VisualState.Setters>
                                </VisualState>
                                <VisualState x:Name="PressedSelected">
                                    <VisualState.Setters>
                                        <Setter Target="Root.(RevealBrush.State)" Value="Pressed" />
                                    </VisualState.Setters>
                                </VisualState>-->
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="DisabledStates">
                                <VisualState x:Name="Enabled" />
                                <VisualState x:Name="Disabled">
                                    <VisualState.Setters>
                                        <Setter Target="Root.RevealBorderThickness" Value="0" />
                                    </VisualState.Setters>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </ListViewItemPresenter>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary>
